<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChromaLens</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <header class="text-center">
            <h1><img src="images/icon48.png" class="logo" alt="logo"> ChromaLens</h1>
            <p>Color Accessibility Tools</p>
        </header>

        <main>
            <article id="inspector-tool">
                <header>
                    <h3><span class="icon">üéØ</span> Color Inspector</h3>
                    <p>Instantly identify any color on the screen.</p>
                </header>
                <button class="primary" id="activate-inspector">Inspect Color</button>
                <div class="result-container hidden" id="inspector-result">
                    <div class="color-preview" id="inspector-color-preview"></div>
                    <div class="color-details">
                        <strong id="inspector-color-name"></strong>
                        <span id="inspector-color-hex"></span>
                    </div>
                </div>
                <div class="speech-controls">
                    <label>
                        <input type="checkbox" id="speech-enabled" checked>
                        üîä Speak color names
                    </label>
                </div>
            </article>

            <article id="camera-tool">
                <header>
                    <h3><span class="icon">üì∑</span> Real-World Vision</h3>
                    <p>Point your camera at any object to identify its color in real-time.</p>
                </header>
                <button class="primary" id="toggle-camera">Start Camera</button>
                
                <div class="camera-container hidden" id="camera-container">
                    <div class="camera-preview">
                        <video id="camera-video" autoplay muted playsinline></video>
                        <div class="color-detector" id="color-detector"></div>
                    </div>
                    <div class="grid">
                        <button class="secondary" id="capture-color">Capture Color</button>
                        <button class="secondary" id="stop-camera">Stop Camera</button>
                    </div>
                </div>

                <div class="result-container hidden" id="camera-result">
                    <div class="color-preview" id="camera-color-preview"></div>
                    <div class="color-details">
                        <strong id="camera-color-name"></strong>
                        <span id="camera-color-hex"></span>
                    </div>
                </div>
            </article>

            <article id="filter-tool">
                <header>
                    <h3><span class="icon">üîç</span> Colorblind Filter</h3>
                    <p>Apply colorblind filters to specific areas of the screen to simulate different types of color vision.</p>
                </header>
                
                <fieldset>
                    <legend>Filter Type</legend>
                    <label>
                        <input type="radio" name="filter-type" value="protanopia" checked>
                        Protanopia (Red-blind)
                    </label>
                    <label>
                        <input type="radio" name="filter-type" value="deuteranopia">
                        Deuteranopia (Green-blind)
                    </label>
                    <label>
                        <input type="radio" name="filter-type" value="tritanopia">
                        Tritanopia (Blue-blind)
                    </label>
                </fieldset>
                
                <button class="primary" id="activate-filter">Start Filter</button>
                
                <div class="filter-instructions hidden" id="filter-instructions">
                    <p><strong>Instructions:</strong> Click and drag to select an area to apply the filter to.</p>
                    <button class="secondary" id="stop-filter">Stop Filter</button>
                </div>
            </article>
        </main>

        <div id="error-message" class="error hidden"></div>
    </div>
    <script src="popup.js"></script>
</body>
</html>
